<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>CHANGELOG - Opal</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/purebasic.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../..">Opal</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../..">Home</a>
                            </li>
                            <li >
                                <a href="../../installation/">Installation</a>
                            </li>
                            <li >
                                <a href="../../tutorial/">Tutorial</a>
                            </li>
                            <li >
                                <a href="../../guides/topic-guides/">Guides</a>
                            </li>
                            <li >
                                <a href="../reference_guides/">Reference</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Topic Guides <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../guides/components_overview/">Component Overview</a>
</li>
                                    
<li >
    <a href="../../guides/command_line_tool/">Command Line tool</a>
</li>
                                    
<li >
    <a href="../../guides/plugins/">Plugins</a>
</li>
                                    
<li >
    <a href="../../guides/plugins_list/">Plugin List</a>
</li>
                                    
<li >
    <a href="../../guides/datamodel/">Data Model</a>
</li>
                                    
<li >
    <a href="../../guides/archetypes/">Archetypes</a>
</li>
                                    
<li >
    <a href="../../guides/working_with_data_in_angular/">Angular Models</a>
</li>
                                    
<li >
    <a href="../../guides/flow/">Flow</a>
</li>
                                    
<li >
    <a href="../../guides/roles_and_permissions/">Roles & Permissions</a>
</li>
                                    
<li >
    <a href="../../guides/tagging/">Tagging</a>
</li>
                                    
<li >
    <a href="../../guides/json_api/">JSON API</a>
</li>
                                    
<li >
    <a href="../../guides/referencedata/">Referencedata</a>
</li>
                                    
<li >
    <a href="../../guides/metadata/">Metadata</a>
</li>
                                    
<li >
    <a href="../../guides/lookup_lists/">Lookup Lists</a>
</li>
                                    
<li >
    <a href="../../guides/templates/">Templates</a>
</li>
                                    
<li >
    <a href="../../guides/context_processors/">Context Processors</a>
</li>
                                    
<li >
    <a href="../../guides/static_files/">Static Files</a>
</li>
                                    
<li >
    <a href="../../guides/forms/">Forms</a>
</li>
                                    
<li >
    <a href="../../guides/patient_detail_views/">Patient Detail Views</a>
</li>
                                    
<li >
    <a href="../../guides/list_views/">Patient List Views</a>
</li>
                                    
<li >
    <a href="../../guides/discoverable/">Discoverable Features</a>
</li>
                                    
<li >
    <a href="../../guides/search/">Search Overview</a>
</li>
                                    
<li >
    <a href="../../guides/django_admin/">Django Admin</a>
</li>
                                    
<li >
    <a href="../../guides/contributing.md">Contributing</a>
</li>
                                    
<li >
    <a href="../../guides/development_environment/">Development environment</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../javascript/episode_service/">Episode service</a>
</li>
                                    
<li >
    <a href="../javascript/patient_service/">Patient service</a>
</li>
                                    
<li >
    <a href="../javascript/item_service/">Item service</a>
</li>
                                    
<li >
    <a href="../javascript/loaders/">Loaders</a>
</li>
                                    
<li >
    <a href="../javascript/patient_summary_service/">Patient summary service</a>
</li>
                                    
<li >
    <a href="../javascript/search_js_services/">Search JS Services</a>
</li>
                                    
<li >
    <a href="../javascript/javascript_helpers/">Javascript helpers</a>
</li>
                                    
<li >
    <a href="../javascript/javascript_dependencies/">Javascript dependencies</a>
</li>
                                    
<li >
    <a href="../episode/">The Episode model</a>
</li>
                                    
<li >
    <a href="../episode_categories/">Episode Categories</a>
</li>
                                    
<li >
    <a href="../patient/">Patient</a>
</li>
                                    
<li >
    <a href="../subrecords/">Subrecords</a>
</li>
                                    
<li >
    <a href="../mixins/">Mixins</a>
</li>
                                    
<li >
    <a href="../opal_application/">OpalApplication</a>
</li>
                                    
<li >
    <a href="../plugin/">OpalPlugin</a>
</li>
                                    
<li >
    <a href="../core_views/">Core.Views</a>
</li>
                                    
<li >
    <a href="../form_templatetags/">Form helpers</a>
</li>
                                    
<li >
    <a href="../panels_templatetags/">Panel Template tags</a>
</li>
                                    
<li >
    <a href="../schemas/">Schemas</a>
</li>
                                    
<li >
    <a href="../search_queries/">Search Queries</a>
</li>
                                    
<li >
    <a href="../detail_views/">Detail Views</a>
</li>
                                    
<li >
    <a href="../patient_list/">Patient Lists</a>
</li>
                                    
<li >
    <a href="../changelog.md">Changelog</a>
</li>
                                    
<li >
    <a href="../testing/">Testing</a>
</li>
                                    
<li >
    <a href="../upgrading/">Upgrading</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#081-minor-release">0.8.1 (Minor Release)</a></li>
            <li><a href="#cookies-for-the-future">Cookies for the future</a></li>
            <li><a href="#patients-as-a-service">Patients as a service</a></li>
            <li><a href="#patientlistget_queryset-arguments">PatientList.get_queryset arguments</a></li>
            <li><a href="#overriding-default-menu-items-behaviour">Overriding default Menu Items behaviour</a></li>
            <li><a href="#removals">Removals</a></li>
            <li><a href="#pending-removals">Pending removals</a></li>
            <li><a href="#subrecord-list-api">Subrecord List API</a></li>
            <li><a href="#misc-changes">Misc Changes</a></li>
        <li class="main "><a href="#080-major-release">0.8.0 (Major Release)</a></li>
            <li><a href="#plugins">Plugins</a></li>
            <li><a href="#opalcoreapipatient_from_pk">opal.core.api.patient_from_pk</a></li>
            <li><a href="#todictmixin_bulk_serialise">ToDictMixin._bulk_serialise</a></li>
            <li><a href="#fixes-bugs-in-add-many-subrecord-radio-buttons">Fixes bugs in add many subrecord radio buttons</a></li>
            <li><a href="#angular-ui-libraries">Angular UI Libraries</a></li>
            <li><a href="#defaults-for-client-side-subrecords">Defaults for Client Side subrecords</a></li>
            <li><a href="#choices-in-form-templatetags">Choices in form templatetags</a></li>
            <li><a href="#element-name-in-template-tags">element name in template tags</a></li>
            <li><a href="#model-removals">Model removals</a></li>
            <li><a href="#python-3">Python 3</a></li>
            <li><a href="#tabbed-patient-list-groups">Tabbed Patient List Groups</a></li>
            <li><a href="#patientlist-sort-order">PatientList sort order</a></li>
            <li><a href="#patientlist-arbitrary-columns">PatientList Arbitrary columns</a></li>
            <li><a href="#template-re-naming">Template re-naming</a></li>
            <li><a href="#authorization-and-permissions">Authorization and permissions</a></li>
            <li><a href="#form-validation">Form Validation</a></li>
            <li><a href="#removals_1">Removals</a></li>
            <li><a href="#misc-changes_1">Misc changes</a></li>
            <li><a href="#updates-to-the-dependency-graph">Updates to the Dependency Graph</a></li>
        <li class="main "><a href="#075-minor-release">0.7.5 (Minor Release)</a></li>
        <li class="main "><a href="#074-minor-release">0.7.4 (Minor Release)</a></li>
        <li class="main "><a href="#073-minor-release">0.7.3 (Minor Release)</a></li>
        <li class="main "><a href="#072-minor-release">0.7.2 (Minor Release)</a></li>
        <li class="main "><a href="#071-minor-release">0.7.1 (Minor Release)</a></li>
            <li><a href="#updates-to-the-dependency-graph_1">Updates to the Dependency Graph</a></li>
        <li class="main "><a href="#070-major-release">0.7.0 (Major Release)</a></li>
            <li><a href="#episode-categories">Episode Categories</a></li>
            <li><a href="#episode-json-api">Episode JSON API</a></li>
            <li><a href="#defaults-for-records-on-the-client-side">Defaults for records on the client side</a></li>
            <li><a href="#update-to-javascript-signatures">Update to Javascript Signatures</a></li>
            <li><a href="#maxlength-for-form-helpers">MaxLength for form helpers</a></li>
            <li><a href="#episodedetail-removed">EpisodeDetail removed</a></li>
            <li><a href="#additional-utilities">Additional utilities</a></li>
        <li class="main "><a href="#060-major-release">0.6.0 (Major Release)</a></li>
        <li class="main "><a href="#models-contextprocessor">Models ContextProcessor</a></li>
            <li><a href="#upgrade-instructions">Upgrade instructions:</a></li>
        <li class="main "><a href="#055-minor-release">0.5.5 (Minor Release)</a></li>
        <li class="main "><a href="#054-minor-release">0.5.4 (Minor Release)</a></li>
        <li class="main "><a href="#053-minor-release">0.5.3 (Minor Release)</a></li>
        <li class="main "><a href="#052-minor-release">0.5.2 (Minor Release)</a></li>
        <li class="main "><a href="#051-minor-release">0.5.1 (Minor Release)</a></li>
        <li class="main "><a href="#05-major-release">0.5 (Major release)</a></li>
        <li class="main "><a href="#043-minor-release">0.4.3 (Minor release)</a></li>
        <li class="main "><a href="#042-minor-release">0.4.2 (Minor release)</a></li>
        <li class="main "><a href="#041-bugfix-release">0.4.1 (Bugfix release)</a></li>
        <li class="main "><a href="#04-major-release">0.4 (Major release)</a></li>
        <li class="main "><a href="#03-major-release">0.3 (Major release)</a></li>
        <li class="main "><a href="#022-bugfix-release">0.2.2 (Bugfix release)</a></li>
        <li class="main "><a href="#021">0.2.1</a></li>
        <li class="main "><a href="#020">0.2.0</a></li>
        <li class="main "><a href="#011">0.1.1</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h3 id="081-minor-release">0.8.1 (Minor Release)</h3>
<h4 id="cookies-for-the-future">Cookies for the future</h4>
<p>We now use the <code>$cookies</code> api as part of moving to angular v1.5.8.</p>
<p>The default expiry of cookies is now a year in the future.</p>
<p>The cookie name previously stored as <code>opal.lastPatientList</code> is now
<code>opal.previousPatientList</code>.</p>
<h4 id="patients-as-a-service">Patients as a service</h4>
<p>Patient becomes a service in angular. This takes in a patient as loaded by the patient loader or another service. It casts the data to Episode or Item instances as appropriate.</p>
<h4 id="patientlistget_queryset-arguments">PatientList.get_queryset arguments</h4>
<p>PatientList.get_queryset() is now passed an extra keyword argument - <code>user</code>.
This is the current <code>User</code> object.</p>
<h4 id="overriding-default-menu-items-behaviour">Overriding default Menu Items behaviour</h4>
<p>The <code>get_menu_items</code> method of Opal Application objects is now passed an extra keyword argument - <code>user</code>.
This is the current <code>User</code> object.</p>
<p>The templatetag application_menuitems now uses this method to render navigation menus, allowing dynamic
customisation of menu contents based on user.</p>
<h4 id="removals">Removals</h4>
<p>Opal 0.8.1 removes some minor features which, to our knowledge are not used by any applications in active development.</p>
<ul>
<li>ReopenEpisodeCtrl - applications may implement their own 're-open' episode flow, but Opal no longer handles this out of the box.</li>
<li>Subrecord._bulk_serialise - this flag has been removed</li>
</ul>
<h4 id="pending-removals">Pending removals</h4>
<p>We have re-named <code>opal.core.views._build_json_response</code> to <code>opal.core.views.json_response</code>. This will issue a
warning for the remainder of the 0.8.x branch, before being removed entirely in Opal 0.9.0.</p>
<h4 id="subrecord-list-api">Subrecord List API</h4>
<p>We have added a list method to the default Opal JSON API for subrecords - you may now obtain a list of all instances
of a given subrecord from the API endpoint <code>/api/v0.1/$api_name/</code>.</p>
<h4 id="misc-changes">Misc Changes</h4>
<p>Updates the custom <code>UserAdmin</code> so that the email, first and last name fields from the Django <code>User</code> model
are in the add user form not just the edit user form.</p>
<p>The default test runner generated by plugin scaffolding now uses <code>opal.urls</code> as the default url conf in the test settings. This allows you to test urls generated by Opal - for instance default form or record templates, or simply raw templates from our generic template view.</p>
<h3 id="080-major-release">0.8.0 (Major Release)</h3>
<h4 id="plugins">Plugins</h4>
<p>Plugins have been refactored and are now <code>DiscoverableFeatures</code>. This should have no impact on existing
plugins, however the functions <code>opal.core.plugins.register</code> and <code>opal.core.plugins.plugins</code> are slated for
removal in 0.9.0</p>
<p>When creating new plugins we will place the plugin definition class in <code>plugin.py</code> rather than <code>__init__.py</code></p>
<h4 id="opalcoreapipatient_from_pk">opal.core.api.patient_from_pk</h4>
<p>A decorator that changes a method that is passed a pk, to a method that is passed a patient.</p>
<h4 id="todictmixin_bulk_serialise">ToDictMixin._bulk_serialise</h4>
<p>Adds a flag to the to dict mixin to determine whether the item is serialised as part of <code>Episode/Patient.to_dict</code>.</p>
<h4 id="fixes-bugs-in-add-many-subrecord-radio-buttons">Fixes bugs in add many subrecord radio buttons</h4>
<p>Previously multiple radio buttons for the same subrecord field on the same page would
not appear to the user to update correctly. This has now been fixed.</p>
<h4 id="angular-ui-libraries">Angular UI Libraries</h4>
<p>0.8.0 consolidates Angular UI libraries bundled with Opal. We have removed Angular Strap, and
switched all components using it to their Angular UI Bootstrap equivalents.</p>
<p>This is a breaking change.</p>
<p>Applications taking advantage of the <code>Forms</code> templatetag library should require no updates, but will see
some minor differences in visual style of widgets.</p>
<p>Detailed upgrade guides for the components affected (Typeahead, Popover,
Tooltip, Datepicker, Timepicker) are available in the upgrade reference documentation.</p>
<h4 id="defaults-for-client-side-subrecords">Defaults for Client Side subrecords</h4>
<p>We pull through default values from subrecord fields into the Opal <code>Schema</code> and use those values when initializing the relevant
Item instance for a new subrecord. This should greatly reduce the need to use custom Angular subrecord services to set defaults.</p>
<h4 id="choices-in-form-templatetags">Choices in form templatetags</h4>
<p>Template tags that use the 'field' attribute to point to a subrecord field will now infer a lookup list from the Choices of the field if it exists.</p>
<p>Note unlike the traditional choices implementation only the last value of the choices is used and saved to the database</p>
<pre><code class="language-python">  Colours = (
    ('P', 'Purple'),
    ('R', 'Red'),
  )
</code></pre>
<p>What is displayed to the user and saved to the database is 'Purple' or 'Red' respectively.</p>
<h4 id="element-name-in-template-tags">element name in template tags</h4>
<p>The html attribute 'name' for form elements generated with the Opal <code>{% forms %}</code> templatetag library used to be inferred from the model name. Although this remains the default you can also set it with an angular expression:</p>
<pre><code class="language-html">{% select field=&quot;Demographics.first_name&quot; element_name=&quot;...Your Angular expression...&quot; %}
</code></pre>
<h4 id="model-removals">Model removals</h4>
<p>The models <code>Team</code>, <code>GP</code>, <code>CommunityNurse</code> and <code>LocatedModel</code> - marked for removal since 0.6.0
have now been removed.</p>
<p>As part of this change, the add episode modal previously available at
<code>/templates/modals/add_episode.html/</code> is now not available at the url with a trailing slash.
Any controllers attempting to open the modal e.g. custom list flows should update their
<code>$modal.open</code> call to remove the trailing slash.</p>
<h4 id="python-3">Python 3</h4>
<p>Opal 0.8.0 is the first version of Opal to support Python 3. This has meant changing the default
ordering of <code>PatientList</code> instances to 0 rather than None.</p>
<p>Moving forwards we expect all new code in Opal to be compatible both Python 2.7 / 3.4 / 3.5 / 3.6.</p>
<p>This introduces an explicit Opal dependency on the Six module for maintaining codebases that span
Python 2.x and 3.x.</p>
<h4 id="tabbed-patient-list-groups">Tabbed Patient List Groups</h4>
<p>Adds the class <code>opal.core.patient_lists.TabbedPatientListGroup</code> which displays groups of related
lists as tabs at the top of each member list.</p>
<h4 id="patientlist-sort-order">PatientList sort order</h4>
<p>To enable custom sort orders for individual <code>PatientList</code>s we introduce the <code>comparator_service</code> attribute.
This names an Angular service which will return a list of comparator functions.</p>
<h4 id="patientlist-arbitrary-columns">PatientList Arbitrary columns</h4>
<p>We now explicitly enable columns in spreadhseet lists that are not tied to subrecords. These can be
included in PatientList schema instances as explicit Column() entries.</p>
<h4 id="template-re-naming">Template re-naming</h4>
<p>Modal_base has now been moved into a folder called base_templates. Its also now got a form_modal_base and a two_column_form_modal_base.
The latter two templates add validation around saving.</p>
<p>The standard edit item models and others now inherit from the form_modal_base.</p>
<h4 id="authorization-and-permissions">Authorization and permissions</h4>
<p>All APIs should be permissioned with Django REST framework permission classes. The default implementation uses
opal.core.api.LoginRequiredViewset, a standard DRF viewset that requires the user to be logged in.</p>
<p>We now require the user to be logged in for any use of the search functionality.</p>
<p>Added a custom interceptor that logs the user out if the we receive a 403 or 401 from the server</p>
<h4 id="form-validation">Form Validation</h4>
<p>Adds the checkForm directive</p>
<p>e.g.</p>
<pre><code class="language-html">&lt;button check-form=&quot;form&quot; ng-click=&quot;sendDataToTheServer&quot;&gt;click me&lt;/button&gt;
</code></pre>
<p>This adds default form submission behaviour to the a button. It will check if the form is valid, and if its not it will mark the button as disabled until it becomes valid.</p>
<p>It will also set the form as submitted.</p>
<p>We also now show the required error if the form has been submitted or if the field is dirty, so that the user doesn't get an ugly "fill this field in now" message when opening the modal/pathway but will get the error after they click submit.</p>
<h4 id="removals_1">Removals</h4>
<p>Opal 0.8.0 removes a number of un-used features that have been slated for removal for some time:</p>
<ul>
<li><code>Options</code> - both from the JSON API, and the Angular service.</li>
<li>The legacy APIs <code>/api/v0.1/episode/admit</code> and <code>/api/v0.1/episode/refer</code>.</li>
<li>The models <code>GP</code>, <code>CommunityNurse</code> and <code>LocatedModel</code>.</li>
<li><code>opal.models.Tagging.import_from_reversion</code>. This one-off classmethod on tagging was introduced to aid with the upgrade from Opal 4.x to 5.0 and has no further utility.</li>
<li>The <code>static</code> argument from the forms <code>input</code> tag. Developers should move to the <code>static</code> tag.</li>
<li>The _modal option to set on subrecords. This is because we now use large modals across the board.</li>
</ul>
<h4 id="misc-changes_1">Misc changes</h4>
<p>The opal.core.api.EpisodeViewSet.create now expects tagging to be an object rather than a list, similar to how it details with demographics and location.</p>
<p>The API will no longer serialise the _ft or _fk_id fields of FreeTextOrForeignKey fields - these
are internal implementation details of the server that are not useful on the client side.</p>
<p>Adds a Unique Together constraint for (Tagging.user, Tagging.episode, Tagging.value)</p>
<p>Look up lists now load in from individual apps. The look for a file at {{ app }}/data/lookuplists.json</p>
<p>The default admin url is now <code>/admin/</code> - rather than <code>/admin/?</code> this results in more readable
admin urls and is closer to what most applications do with the Django admin.</p>
<p>The roles field <code>opal.models.UserProfile.roles</code> has been updated to be <code>blank=True</code>. This allows the editing
of users without specific roles assigned in the Django admin. Although this introduces no changes at the
database level, this does introduce a migration.</p>
<h4 id="updates-to-the-dependency-graph">Updates to the Dependency Graph</h4>
<p>Upgrades angular to v1.5.8 (from 1.3.11) you can see their change log <a href="https://github.com/angular/angular.js/blob/master/CHANGELOG.md">here</a></p>
<p>Updates angular-cookies and angular-mocks to v1.5.8 (both from 1.3.11)</p>
<p>Updates angular-ui-select to 0.19.4 from 0.13.2</p>
<h3 id="075-minor-release">0.7.5 (Minor Release)</h3>
<p>The flow enter and exif functions now take an optional context argument. When called from PatientList or PatientDetail controllers this is the parent scope when the flow has been entered.</p>
<p>Note: The current Flow API is likely to undergo substantial revision in Opal 0.9 / 0.10 do contact us on the mailing list if you are relying heavily upon it or would like to let us know your needs.</p>
<h3 id="074-minor-release">0.7.4 (Minor Release)</h3>
<p>Adds  a past filter, future and past filters now take a
boolean argument as to whether you should include today</p>
<h3 id="073-minor-release">0.7.3 (Minor Release)</h3>
<p>Fixes a bug whereby celery tasks are not autodiscovered - will have affected users of async extract functionality.</p>
<h3 id="072-minor-release">0.7.2 (Minor Release)</h3>
<p>Fixes a bug with the copy to category API not setting category name.</p>
<p>Removes the hangover use of options in the list of teams per episode in the patient list</p>
<h3 id="071-minor-release">0.7.1 (Minor Release)</h3>
<p>Completes the refactor of front end data, no longer using the <code>/api/v0.1/options/</code> API internally.
This is slated for removal in 0.8.0.</p>
<p>Updates DRF APIs - we now expect either Token or DjangoSession auth.</p>
<p>Fixes several small bugs with scaffolded applications -  the setting of <code>STATIC_ROOT</code> and
<code>SECRET_KEY</code>, generating forms for NullBooleanFields, requirements.txt.</p>
<p>Adds an <code>aligned_pair</code> templatetag to the <code>panels</code> library.</p>
<p>Updates the label for <code>Demographics.birth_place</code> to indicate that this should be a country.</p>
<p>Adds the <code>clipboard</code> directive to give the user one click copy to clipboard.</p>
<p>Adds a <code>tag-select</code> directive that renders a widget for editing the tags for an episode.</p>
<p>Adds metadata to the scope for patient detail views</p>
<h4 id="updates-to-the-dependency-graph_1">Updates to the Dependency Graph</h4>
<ul>
<li>Django Axes 1.4.0 -&gt; 1.7.0</li>
</ul>
<h3 id="070-major-release">0.7.0 (Major Release)</h3>
<h4 id="episode-categories">Episode Categories</h4>
<p>Refactors EpisodeCategory to be a discoverable feature.</p>
<p>Renames <code>Episode.category</code> -&gt; <code>Episode.category_name</code>.</p>
<h4 id="episode-json-api">Episode JSON API</h4>
<p>The Restful Episode JSON API previously available at <code>/episode/:pk/</code> is now moved into
<code>/api/v0.1/episode/:pk/</code> for consistency with the rest of our JSON APIs.
The Opal Angular layer has been updated to reflect this, and
should handle the transition seamlessly, but code calling the API directly should update
to reflect the new URL.</p>
<h4 id="defaults-for-records-on-the-client-side">Defaults for records on the client side</h4>
<p>Establishes a new way to define defaults for records initialized in Javascript without
requiring that we hard-code API names to defaults in a global namespace.</p>
<h4 id="update-to-javascript-signatures">Update to Javascript Signatures</h4>
<p><code>Flow.enter()</code> and <code>Flow.exit()</code> now no longer take <code>options</code> positional arguments - instead
the controllers they initialize have <code>Metadata</code> and <code>Referencedata</code> as optional resolves
arguments.</p>
<p>AddEpisodeCtrl now no longer requires options as a resolves() option, but requires Referencedata
instead.</p>
<h4 id="maxlength-for-form-helpers">MaxLength for form helpers</h4>
<p>The <code>input</code> form helper will now infer the max length of char fields from the max length of the
database field, and render relevant Angular directives.</p>
<h4 id="episodedetail-removed">EpisodeDetail removed</h4>
<p>The <code>EpisodeDetailCtrl</code> and <code>EpisodeDetailMixin</code> controller and service have been removed - these
were not used anywhere other than in the Wardround plugin, and redundant after enhancements to
Patient Detail and Custom DetailViews in 0.6.</p>
<h4 id="additional-utilities">Additional utilities</h4>
<p>Adds a datetimepicker templatetag that will render widgets for a Datetime field including time.</p>
<p>Adds a <code>date_of_birth_field</code> templatetag that renders a date of birth field complete with inteligent
validation. (Note this change also includes removing the old _partial/ template)</p>
<p>Updates dependency graph:</p>
<ul>
<li>Django -&gt; 1.8.13</li>
</ul>
<h3 id="060-major-release">0.6.0 (Major Release)</h3>
<p><strong>Detail views</strong></p>
<p>Moves from episode oriented detail to patient oriented detail.
(All episodes plus x-episode views are available from a patient detail screen)</p>
<p><strong>Tagging</strong></p>
<p>As a performance optimisation for the frequent access of historic tags, untagging
an episode simply renders the tag inactive rather than deleting it and relying on
Django-Reversion for access to historical data.</p>
<p><strong>Date Formatting</strong></p>
<p>We now expect 'd/m/y' date formatting by default.</p>
<p><strong>Patient lists</strong></p>
<p>Lists are now declarative, and separate from teams. They are implemented as
subclasses of opal.core.patient_lists.PatientList.</p>
<p><strong>Forms vs. Modals</strong></p>
<p>Introduces a distinction between a form and a modal.
By default, we now use forms for subrecords, only overriding the modal if there
is something we want to do differently specifically in the modal.</p>
<p><strong>Command line tools</strong></p>
<p>Adds $opal checkout for switching between applications or application versions.</p>
<h3 id="models-contextprocessor">Models ContextProcessor</h3>
<p>The 'opal.context_processors.models' Context Processor will allow you to access your
subrecords from templates without having to explicitly load them in a view. In turn,
this allows patterns like:</p>
<pre><code>{% include models.Demographics.get_detail_template %}
</code></pre>
<h4 id="upgrade-instructions">Upgrade instructions:</h4>
<p>Full upgrade instructions to work through any backwards incompatible changes are
provided in the Opal docs.</p>
<h3 id="055-minor-release">0.5.5 (Minor Release)</h3>
<p>Changes the way old tags are handled.</p>
<p>Tags are no longer deleted episodes, rather they're marked as archived.</p>
<h3 id="054-minor-release">0.5.4 (Minor Release)</h3>
<ul>
<li>Include local storage</li>
</ul>
<h3 id="053-minor-release">0.5.3 (Minor Release)</h3>
<ul>
<li>Speed up loading of the lookup lists</li>
<li>Fix pagination issues in search</li>
<li>Speed up loading of many to many fields</li>
<li>Increase test coverage</li>
<li>Add some extra help fields to {% forms %} helpers</li>
<li>Fixes bug with $rootScope.open_modal() where keystrokes were being intercepted</li>
</ul>
<h3 id="052-minor-release">0.5.2 (Minor Release)</h3>
<p>Speed improvements on page load
allow us to only show record panels if a record of that type exists
disable modal buttons while saving</p>
<h3 id="051-minor-release">0.5.1 (Minor Release)</h3>
<p>Minor bug fixes</p>
<h3 id="05-major-release">0.5 (Major release)</h3>
<p><strong>Search</strong></p>
<p>Complete re-design of Search interface to provide a single search box on every page and pagination for resulta.
Puts in place a pluggable interface that could be swapped out for e.g. ElasticSearch.
New Service for PatientSummary()</p>
<p><strong>Analytics</strong></p>
<p>Moves Analytics integration into Opal core with the ability to blacklist pages that should never be reported</p>
<p><strong>List view</strong></p>
<p>Removed old spreadsheet-style cell based navigation and moved to row-wise nav with clearer highlighting of the active row.
Updated scrolling and loading behaviour to snap to viewport and not display the page build.</p>
<p><strong>Subrecord metadata</strong></p>
<p>Added four new utility fields to Patient and Episode subrecords:</p>
<p>created_by, updated_by, created, updated</p>
<p><strong>Select2 and list fields</strong></p>
<p>Added support for select2 as an input widget and Subrecord fields that can be lists of things.</p>
<p><strong>Also</strong></p>
<p>Numerous small bugfixes.
Refactoring of the models package into a models module.
Updated Underscore.js -&gt; 1.8.3
Updated Angular.js -&gt; 1.3.11</p>
<h3 id="043-minor-release">0.4.3 (Minor release)</h3>
<p>Refactors opal.models to be a models.py file rather than a package.
Adds several improvements to forms helpers -&gt; Help argument, other argument to select.</p>
<p>Updates dependency graph:</p>
<ul>
<li>Angular-strap -&gt; 2.3.1</li>
</ul>
<h3 id="042-minor-release">0.4.2 (Minor release)</h3>
<p>Upgrades dependency graph:</p>
<ul>
<li>Django -&gt; 1.8.3</li>
<li>Django-reversion -&gt; 1.8.7</li>
<li>jQuery -&gt; 1.11.3</li>
<li>D3 -&gt; 3.5.6</li>
<li>C4 -&gt; 0.4.10</li>
</ul>
<p>South has been removed, now using django migrations</p>
<h3 id="041-bugfix-release">0.4.1 (Bugfix release)</h3>
<p>Fixes some search results appearing duplicated.</p>
<h3 id="04-major-release">0.4 (Major release)</h3>
<p><strong>New Design</strong></p>
<p>Completely re-designed UI following extensive user research and multiple iterations.</p>
<p><strong>Managementcommands and scaffolding</strong></p>
<p>Features the opal command line tool for common administrative tasks
http://opal.openhealthcare.org.uk/docs/guides/command_line_tool/</p>
<p><strong> Form helpers templatetag library</strong></p>
<p>New template library for consistent form controls in line with our new interface guidelines
http://opal.openhealthcare.org.uk/docs/reference/form_templatetags/</p>
<p><strong>API Documentation</strong></p>
<p>Opal JSON APIs are now fully self-documenting for all updated instances
http://opal.openhealthcare.org.uk/docs/guides/json_api/</p>
<h3 id="03-major-release">0.3 (Major release)</h3>
<p>Bugfixes, significant flexibility in template customisability.</p>
<p>Minor UI updates.</p>
<h3 id="022-bugfix-release">0.2.2 (Bugfix release)</h3>
<p>Numerous small bugfixes.</p>
<p>Adds the concept of undischarging patients.</p>
<h3 id="021">0.2.1</h3>
<p>Numerous small bugfixes.</p>
<h3 id="020">0.2.0</h3>
<p>Search overhaul - introduces advanced searches.</p>
<h3 id="011">0.1.1</h3>
<p>Initial public release</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
