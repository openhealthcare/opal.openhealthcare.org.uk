<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title></title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/purebasic.min.css">
        <!-- <link href="../../css/bootstrap-custom.min.css" rel="stylesheet"> -->
        <!-- <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet"> -->
        <!-- <link rel="stylesheet" href="../../css/highlight.css"> -->
        <!-- <link href="../../css/base.css" rel="stylesheet"> -->
        <link href="../../opaldocs.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    </head>

    <body>
        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="">
              <img src="/img/opallogo.png" height="30"/>
            </a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Home</a>
                </li>
            
            
            
                <li >
                    <a href="../../installation/">Installation</a>
                </li>
            
            
            
                <li >
                    <a href="../../tutorial/">Tutorial</a>
                </li>
            
            
            
                <!-- <li class="dropdown"> -->
                <!--     <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorials <b class="caret"></b></a> -->
                <!--     <ul class="dropdown-menu"> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="tutorials/pathway_tutorial/">Tutorial: Creating forms with Opal</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="tutorials/theming_tutorial/">Customising the design of your application</a> -->
                <!--         </li> -->
                <!--      -->
                <!--     </ul> -->
                <!-- </li> -->
            
            
            
                <li >
                    <a href="../topic-guides/">Guides</a>
                </li>
            
            
            
                <li >
                    <a href="../../reference/reference_guides/">Reference</a>
                </li>
            
            
            
                <!-- <li class="dropdown active"> -->
                <!--     <a href="#" class="dropdown-toggle" data-toggle="dropdown">Topic Guides <b class="caret"></b></a> -->
                <!--     <ul class="dropdown-menu"> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/components_overview/">Component Overview</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/command_line_tool/">Command Line tool</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/discoverable/">Discoverable Features</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/plugins/">Plugins</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/plugins_list/">Plugin List</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/datamodel/">Data Model</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/episodes/">Episodes</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/archetypes/">Archetypes</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/referencedata/">Referencedata</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/metadata/">Metadata</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/working_with_data_in_angular/">Angular Models</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/roles_and_permissions/">Roles & Permissions</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/tagging/">Tagging</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/json_api/">JSON API</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/theming/">Theming</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/templates/">Templates</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/context_processors/">Context Processors</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/static_files/">Static Files</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/forms/">Forms</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/patient_detail_views/">Patient Detail Views</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/list_views/">Patient List Views</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/search/">Search Overview</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li class="active"> -->
                <!--             <a href="guides/pathways/">Pathway Overview</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/django_admin/">Django Admin</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/contributing/">Contributing</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/development_environment/">Development environment</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/releasing/">Releasing</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="guides/deployment/">Deployment</a> -->
                <!--         </li> -->
                <!--      -->
                <!--     </ul> -->
                <!-- </li> -->
            
            
            
                <!-- <li class="dropdown"> -->
                <!--     <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a> -->
                <!--     <ul class="dropdown-menu"> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/episode/">The Episode model</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/patient/">The Patient model</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/subrecords/">Subrecords</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/user_profile_model/">UserProfile</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/mixins/">Mixins</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/opal_application/">OpalApplication</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/detail_views/">Detail Views</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/episode_categories/">Episode Categories</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/schemas/">Schemas</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/patient_list/">Patient Lists</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/plugin/">OpalPlugin</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/core_views/">Core.Views</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/core_menus/">Menus</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/loggers/">Log</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/core_fields/">Fields</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/core_lookuplists/">Lookuplists</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/core_discoverable/">Discoverable</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/core_serialization/">Serialization</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/core_subrecords/">Subrecords</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/javascript/patient_service/">Patient service</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/javascript/episode_service/">Episode service</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/javascript/item_service/">Item service</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/javascript/user_service/">The User service</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/javascript/patient_summary_service/">Patient summary service</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/javascript/search_js_services/">Search JS Services</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/javascript/loaders/">Loaders</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/form_templatetags/">Form helpers</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/panels_templatetags/">Panel Template tags</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/menus_templatetags/">Menu Template tag</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/javascript/javascript_helpers/">Javascript helpers</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/utils/">Utils module</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/search_queries/">Search Queries</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/pathways/">Pathway</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/settings/">Settings</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/changelog/">Changelog</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/testing/">Testing</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/javascript/javascript_dependencies/">Javascript dependencies</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/upgrading/">Upgrading</a> -->
                <!--         </li> -->
                <!--      -->
                <!--         <li > -->
                <!--             <a href="reference/management_commands/">Management commands</a> -->
                <!--         </li> -->
                <!--      -->
                <!--     </ul> -->
                <!-- </li> -->
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
              <li>
                <a href="https://github.com/openhealthcare/opal/tree/v0.17.0" target="_blank">
                  <i class="fa fa-github"></i> v0.17.0
                </a>
              </li>
                <!-- <li class="disabled"> -->
                <!--     <a rel="next" > -->
                <!--         <i class="fa fa-arrow-left"></i> Previous -->
                <!--     </a> -->
                <!-- </li> -->
                <!-- <li class="disabled"> -->
                <!--     <a rel="prev" > -->
                <!--         Next <i class="fa fa-arrow-right"></i> -->
                <!--     </a> -->
                <!-- </li> -->
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
  <h3>Contents</h3>
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#guide-the-pathway-module">Guide: The pathway module</a></li>
        
            <li><a href="#pathway-steps">Pathway steps</a></li>
        
            <li><a href="#customising-steps">Customising Steps</a></li>
        
            <li><a href="#loading-data-from-existing-episodes">Loading Data From Existing Episodes</a></li>
        
            <li><a href="#multiple-instances-of-records">Multiple Instances Of Records</a></li>
        
            <li><a href="#complex-steps">Complex Steps</a></li>
        
            <li><a href="#complex-step-logic">Complex step logic</a></li>
        
            <li><a href="#complex-steps-with-multiple-instances-per-subrecord">Complex Steps With Multiple Instances Per Subrecord</a></li>
        
            <li><a href="#validation">Validation</a></li>
        
            <li><a href="#wizards">Wizards</a></li>
        
            <li><a href="#success-redirects">Success Redirects</a></li>
        
            <li><a href="#redirect-mixins">Redirect Mixins</a></li>
        
            <li><a href="#modal-pathways">Modal Pathways</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main"><h1 id="guide-the-pathway-module">Guide: The pathway module</h1>
<p>The pathway module provides developers with a highly extensible method of
working with complex forms.</p>
<p>Typically pathways are forms that allow the user to enter information that spans multiple
<code>Subrecords</code> - which can be challenging with the <code>Subrecord forms</code>.</p>
<p>The pathway provides Wizards, long multi-model forms, custom validation and much more,
all usable either in full page or modal contexts.</p>
<p>If you're new to using pathways, you might like to go through the
<a href="../../tutorials/pathway_tutorial/">Pathway tutorial</a>.</p>
<blockquote><small>
See the
<a href="../../reference/pathways/">Pathway reference documentation</a>
for detailed class and method level information <br/ >
on the pathway module.
</small></blockquote>

<h2 id="pathway-steps">Pathway steps</h2>
<p>A pathway is comprised of a sequence of <code>Step</code>s. These are sections within a form.</p>
<p>They can be defined as HTML forms with custom attributes and Angular controllers,
or inferred by passing models to the <code>steps</code> attribute of your pathway.</p>
<p>In the simplest case a pathway re-uses the forms for a sequence of subrecords, and we would
create one by subclassing <code>opal.core.pathway.PagePathway</code> in a file called
<code>{{ your app }}/pathways.py</code> like so:</p>
<pre><code class="python">from opal.core import pathway
from myapp import models

class SimplePathway(pathway.PagePathway):
    display_name = 'A simple pathway'
    slug = &quot;simples&quot;
    steps        = (
        models.Demographics,
        models.PastMedicalHistory
    )
</code></pre>

<p>This will give you form at <code>http://localhost:8000/pathway/#/simples</code> that
lets the user create a patient with their demographics and past medical history</p>
<h2 id="customising-steps">Customising Steps</h2>
<p>When passed a model, a step will infer the details of form templates, display names et
cetera from the subrecord. However a model is not required - you can also pass arbitrary
chunks of html with the two required fields:</p>
<pre><code class="python">Step(
  template=&quot;pathway/steps/my_step.html&quot;
  display_name=&quot;My Display Only Step&quot;
)
</code></pre>

<p>Alternatively, you can override any fields that it would usually take from the model.
The below example, will override the template and not just use the Demographics form template.</p>
<pre><code class="python">Step(
  template=&quot;pathway/steps/my_step.html&quot;
  model=Demographics
)
</code></pre>

<p>The <code>Step.base_template</code> wraps the form template for each step.</p>
<p>By default this is a bootstrap panel,
with the step display name and step icon in the header and the form template in the panel body.</p>
<p>You can override this by overriding the <code>base_template</code>.</p>
<pre><code class="python">Step(
  base_template=&quot;pathway/steps/addicted_to_base.html&quot;
  model=Demographics
)
</code></pre>

<p>If you want to add any custom save logic for your step, you can put in a <code>pre_save</code> method.
This is passed the full data dictionary that has been received from the client and the patient
and episode that the pathways been saved for, if they exist (If you're saving a pathway for a
new patient/episode, they won't have been created at this time).</p>
<h2 id="loading-data-from-existing-episodes">Loading Data From Existing Episodes</h2>
<p>A URL without a patient id or episode id will create a new patent/episode when
you save it.</p>
<p>To update a particular patient with a new episode, the URL should be:
<code>http://localhost:8000/pathway/#/simples/{{ patient_id }}</code></p>
<p>To update a particular episode the URL should be:
<code>http://localhost:8000/pathway/#/simples/{{ patient_id }}/{{ episode_id }}</code></p>
<p>When you visit these urls with the ids for existing patients and episodes,
the form will be prepulated with the existing data for that patient/episode.</p>
<h2 id="multiple-instances-of-records">Multiple Instances Of Records</h2>
<p>If the model is not a singleton, by default it will be show in the form as
a multiple section that allows the user to add one or more models.</p>
<p>If you don't wish this to happen, pass <code>multiple=False</code> to the Step</p>
<p>This displays a delete button for existing subrecords.</p>
<p>By default, any subrecords that are deleted, or are not included in the data sent back
to the server are deleted.</p>
<p>If you don't wish this to happen, pass <code>delete_others=False</code> to the Step.</p>
<pre><code class="python">from opal.core import pathway
from myapp import models

class SimplePathway(pathway.Pathway):
    display_name = 'A simple pathway'
    slug         = 'simples'
    steps        = (
        pathway.Step(model=models.Allergies, delete_others=True),
        models.Treatment,
        models.PastMedicalHistory
    )
</code></pre>

<p>In this case, the pathway will delete any existing instances of the given Subrecord Model that
are not sent back to the API in the JSON data.</p>
<h2 id="complex-steps">Complex Steps</h2>
<p>If we want to save multiple types of subrecords at the same step, we can do that by including the
relevant form templates in a custom step template.</p>
<pre><code class="python">from opal.core import pathway
from myapp import models

class SimplePathway(pathway.Pathway):
    display_name = 'A simple pathway'
    slug         = 'simples'
    steps        = (
        pathways.Step(
            display_name='Demographics and Diagnosis',
            icon='fa fa-clock',
            template='pathways/demographics_and_diagnosis_step.html'
            ),
    )
</code></pre>

<p>The display name and icon are rendered in the header for this step in your pathway, which
exist outside the scope of the step template itself. Then all we would need is the template
itself:</p>
<pre><code class="html">&lt;!-- pathways/demographics_and_diagnosis_step.html --&gt;
{% include models.Demographics.get_form_template %}
{% include models.Diagnosis.get_form_template %}
</code></pre>

<blockquote><small>
Pathways created in this way will not add in the model defaults.
</small></blockquote>

<h2 id="complex-step-logic">Complex step logic</h2>
<p>Pathway steps can be rendered with a custom controller.
You can do this by declaring an angular step in your controller.</p>
<pre><code class="python">steps = (
    Step(
        model=MyModel,
        step_controller=&quot;FindPatientCtrl&quot;,
    ),
)
</code></pre>

<p>Your javascript controller should then look something like...</p>
<pre><code class="js">angular.module('opal.controllers').controller('FindPatientCtrl',
    function(scope, step, episode) {
    &quot;use strict&quot;;
    // your custom logic
});
</code></pre>

<p>oWe can pass in custom controllers to individual steps. Custom
controllers are sandboxed, they share <code>scope.editing</code> with other scopes but
nothing else.</p>
<p>The scope passed in comes with reference data and meta data set as attributes.
It also comes with the scope.editing. This is the dictionary that will
appear in the form and will be saved back at the end.</p>
<p>The step is the step definition from the server - the output of
<code>step.to_dict</code>.</p>
<p>The <code>episode</code> is an instance of the javascript Episode class - not the output
of <code>Episode.makeCopy()</code>.</p>
<p>Before a copy of the form data is sent back to the server, it is passed to the
<code>preSave</code> method of each step controller. Step controllers may alter this data
here if required to e.g. add implicit data points not contained in the form.</p>
<h2 id="complex-steps-with-multiple-instances-per-subrecord">Complex Steps With Multiple Instances Per Subrecord</h2>
<p>If we need to also save multiple types of the same subrecord e.g. <code>Treatment</code> in this step,
we simply use the <code>multisave</code> template tag.</p>
<pre><code class="html">{% load pathways %}

{% include models.Demographics.get_form_template %}
{% include models.Diagnosis.get_form_template %}
{% multisave models.Treatment %}
</code></pre>

<p>Alternatively you may want to create your own multisave step forms, you can use the
directive <code>multi-save-wrapper</code> for this.</p>
<pre><code class="html">
&lt;div save-multiple-wrapper=&quot;editing.treatment&quot;&gt;
  &lt;div ng-repeat=&quot;editing in model.subrecords&quot;&gt;
    {% input field=&quot;Treatment.drug&quot; %}
    &lt;button ng-click=&quot;remove($index)&quot;&gt;&lt;/button&gt;
  &lt;/div&gt;

  &lt;button ng-click=&quot;addAnother()&quot;&gt;&lt;/button&gt;
&lt;/div&gt;
</code></pre>

<h2 id="validation">Validation</h2>
<p>If you want to add custom validation, the method <code>StepController.valid(form)</code> is
called on each step controller.</p>
<p>This means you can set validation rules on the form.</p>
<p>An invalid form will have the save button disabled, until the form is valid.</p>
<h2 id="wizards">Wizards</h2>
<p>Wizard pathways look for a <code>hideFooter</code> variable that defaults to false. If set to true, this will hide the default next/save button. If you don't want the wizard pathway to be a linear progression.
This is useful when you want the user to go to different
steps based on options they chose.</p>
<p>If you want to handle complex order, this is best done in a custom controller
for you step class. You can set this with.</p>
<h2 id="success-redirects">Success Redirects</h2>
<p>Often, after successfully saving a pathway, we want to redirect the user to a different
URL - we do this by overriding the <code>redirect_url</code> method on the pathway. For example -
to create a pathway that always logged the user out after a successful save:</p>
<pre><code class="python">class LogoutPathway(pathway.Pathway):
    display_name = 'Logout-O-Matic'
    steps        = (...)

    def redirect_url(self, patient):
        return '/accounts/logout/'
</code></pre>

<h2 id="redirect-mixins">Redirect Mixins</h2>
<p>By default any full page pathway (ie not a modal) will redirect to the episode
detail view of that episode.</p>
<p>If you do not wish this to be the case you can override the redirect_url.</p>
<p>Pathways comes with the <code>RedirectsToPatientMixin</code>, which redirects to the Patient
detail view and can be used as follows.</p>
<pre><code class="python">from opal.core.pathway import RedirectsToPatientMixin

class PatientRedirectPathway(pathway.RedirectsToPatientMixin, pathway.PagePathway):
    display_name = 'Redirector example Pathway'
    steps = (...)
</code></pre>

<h2 id="modal-pathways">Modal Pathways</h2>
<p>Pathways detect when you're opening a pathway from a modal.</p>
<p>You can use a different template for your modal pathway by adding a modal_template attribute to your pathway</p>
<p>Pathways ships with a no footer modal template, the same as the normal modal template but it doesn't display the section at the bottom with the save/cancel button.</p>
<p>To open a modal pathway in a template you can use the open-pathway directive:</p>
<pre><code class="html">&lt;a open-pathway=&quot;test_results&quot;&gt;open test results pathway&lt;/a&gt;
</code></pre>

<p>The open-pathway directive also includes an optional callback, that is called with the context of the result of the modal.save method, ie episode_id, patient_id and redirect_url.</p>
<p>By default the pathway is opened with whichever episode is on $scope.episode, you can use pathway-episode to define a different episode.</p>
<pre><code class="html">&lt;a open-pathway=&quot;test_results&quot;
   pathway-episode=&quot;someOtherEpisode&quot;
   pathway-callback=&quot;refreshEpisode(episode_id)&quot;&gt;
   open test results pathway
&lt;/a&gt;

</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <img src="/img/opallogo.png" class="pull-left"/>
            <center>
              <br />
              Opal is an open source framework for building clinical applications from
              <a href="http://openhealthcare.org.uk" target="_blank">Open Health Care UK</i></a>.
            </center>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script src="../../search/main.js"></script>
          <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-35112560-5', 'openhealthcare.org.uk');
  ga('send', 'pageview');
          </script>

    </body>
</html>